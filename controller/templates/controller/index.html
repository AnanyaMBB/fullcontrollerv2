{% extends 'main.html' %}

{% block content %}

<section class="header">
    <div class="container">
        <h1>IRIS Ventilation System Control Interface</h1>
        <!-- <button>Logout</button> -->
        
    </div>
    <div class="lighting">
        <a href="{% url 'logoutPage' %}">Logout</a>
        <!-- <span class="material-symbols-outlined">
            wb_incandescent
        </span> -->
    </div>
</section>

<section class="nav">
    <div class="ventilation-btn">
        <span>Ventilation</span>
    </div>
    <div class="lighting-btn">
        <span>Lighting</span>
    </div>
    <div class="power-btn">
        <span>Power</span>
    </div>
</section>

<!-- <section class="addModel">
    <div class="container">
        <form action="">
            <input type="text" placeholder="Write the Model Name">
            <input type="submit" value="Confirm">
        </form>
    </div>
</section> -->
<section class="all-container display-none-property">
<section class="main-container width-100">
<section class="menu">
    <h1>FAN Control</h1>
    <h1>DUCT Control</h1>
</section>


<section class="main">
    <section class="fan-control">
        <div class="east">
            <h1>West</h1>
            <div class="btn-container">
            <div class="east-top-btn">
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="west_top_btn_1">
                    <input type="submit" value="" {% if boolBtnSelectedFan.east_top_btn_1 == 1 %} class="selectedBtn" {% endif %} id="btn">
                </form>
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="west_bottom_btn_1">
                    <input type="submit" value="" {% if boolBtnSelectedFan.east_top_btn_2 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                
            </div>
            <div class="east-bottom-btn">
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="west_top_btn_2">
                    <input type="submit" value="" {% if boolBtnSelectedFan.east_bottom_btn_1 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="west_bottom_btn_2">
                    <input type="submit" value="" {% if boolBtnSelectedFan.east_bottom_btn_2 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                
            </div>
        </div>
        </div>
        <div class="north-south">
            <h1>North</h1>
            <div class="top">
                <div class="top-top">
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tt_btn_1" >
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tt_btn_1 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tt_btn_1 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tt_btn_2">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tt_btn_2 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tt_btn_2 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tt_btn_3">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tt_btn_3 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tt_btn_3 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tt_btn_4">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tt_btn_4 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tt_btn_4 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tt_btn_5">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tt_btn_5 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tt_btn_5 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tt_btn_6">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tt_btn_6 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tt_btn_6 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                </div>
                <div class="top-bottom">
                    <div class="btn-container">   
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tb_btn_1">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tb_btn_1 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tb_btn_1 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tb_btn_2">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tb_btn_2 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tb_btn_2 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tb_btn_3">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tb_btn_3 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tb_btn_3 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tb_btn_4">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tb_btn_4 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tb_btn_4 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tb_btn_5">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tb_btn_5 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tb_btn_5 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_tb_btn_6">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_tb_btn_6 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_tb_btn_6 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                </div>
            </div>
            <div class="bottom">
                <h1>South</h1>
                <div class="bottom-top">
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bt_btn_1">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bt_btn_1 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bt_btn_1 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bt_btn_2">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bt_btn_2 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bt_btn_2 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bt_btn_3">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bt_btn_3 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bt_btn_3 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bt_btn_4">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bt_btn_4 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bt_btn_4 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bt_btn_5">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bt_btn_5 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bt_btn_5 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bt_btn_6">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bt_btn_6 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bt_btn_6 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                </div>
                <div class="bottom-bottom">
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bb_btn_1">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bb_btn_1 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bb_btn_1 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bb_btn_2">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bb_btn_2 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bb_btn_2 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bb_btn_3">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bb_btn_3 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bb_btn_3 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bb_btn_4">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bb_btn_4 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bb_btn_4 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                    <div class="btn-container">
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bb_btn_5">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bb_btn_5 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bb_btn_5 == 1 %} disabled {% endif %}>
                        </form>
                        <form method="POST" action="{% url 'indexPage' %}">
                            {% csrf_token %}
                            <input type="text" name="q" value="ns_bb_btn_6">
                            <input type="submit" value="" {% if boolBtnSelectedFan.ns_bb_btn_6 == 1 %} class="selectedBtn" {% endif %} {%if disabledFan.ns_bb_btn_6 == 1 %} disabled {% endif %}>
                        </form>
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="west">
            <h1>East</h1>
            <div class="west-top-btn">
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="east_top_btn_1">
                    <input type="submit" value="" {% if boolBtnSelectedFan.west_top_btn_1 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="east_bottom_btn_1">
                    <input type="submit" value="" {% if boolBtnSelectedFan.west_top_btn_2 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                <!-- <a href="" class="west-btn-1"></a>
                <a href="" class="west-btn-2"></a> -->
            </div>
            <div class="west-bottom-btn">
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="east_top_btn_2">
                    <input type="submit" value="" {% if boolBtnSelectedFan.west_bottom_btn_1 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                <form method="POST" action="{% url 'indexPage' %}">
                    {% csrf_token %}
                    <input type="text" name="q" value="east_bottom_btn_2">
                    <input type="submit" value="" {% if boolBtnSelectedFan.west_bottom_btn_2 == 1 %} class="selectedBtn" {% endif %}>
                </form>
                <!-- <a href="" class="west-btn-3"></a>
                <a href="" class="west-btn-4"></a> -->
            </div>
        </div>
    </section>
    <section class="duct-control">
        <!-- <div class="duct-menu">
            <h1>Floor 1</h1>
            <h1>Floor 2</h1>
            <h1>Ceiling 1</h1>
            <h1>Ceiling 2</h1>
        </div> -->
        <div class="duct-action">
            <div class="floor-1">  
                <div class="power-btns">
                    <button class="floor-1-duct-power:ON">ON</button>
                    <button class="floor-1-duct-power:OFF">OFF</button>
                </div>
                <form method="POST" action="{% url 'multipleSelect' %}" id="floor-1-1-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="floor_1_1">
                    <input type="submit" id="floor-1-1" value="Floor 1-1">
                </form>             
                <a href="{% url 'index' 'floor_1_btn_1' %}" class="floor_1_btn_1 {% if boolBtnSelectedDuct.floor_1_btn_1 == 1 %} selectedBtn {% endif %}" ></a>
                <input type="text" name="q" class="duct-position-input floor_1_btn_1 display-none-property" />
                <a href="{% url 'index' 'floor_1_btn_2' %}" class="floor_1_btn_2 {% if boolBtnSelectedDuct.floor_1_btn_2 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_1_btn_2 display-none-property" />
                <a href="{% url 'index' 'floor_1_btn_3' %}" class="floor_1_btn_3 {% if boolBtnSelectedDuct.floor_1_btn_3 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_1_btn_3 display-none-property" />
                <!-- <h1>Floor 1-2</h1>  -->
                <form method="POST" action="{% url 'multipleSelect' %}" id="floor-1-2-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="floor_1_2">
                    <input type="submit" id="floor-1-2" value="Floor 1-2">
                </form> 
                <a href="{% url 'index' 'floor_1_btn_4' %}" class="floor_1_btn_4 {% if boolBtnSelectedDuct.floor_1_btn_4 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_1_btn_4 display-none-property" />
                <a href="{% url 'index' 'floor_1_btn_5' %}" class="floor_1_btn_5 {% if boolBtnSelectedDuct.floor_1_btn_5 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_1_btn_5 display-none-property" />
                <a href="{% url 'index' 'floor_1_btn_6' %}" class="floor_1_btn_6 {% if boolBtnSelectedDuct.floor_1_btn_6 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_1_btn_6 display-none-property" />
            </div>
            <div class="floor-2">
                <div class="power-btns">
                    <button class="floor-2-duct-power:ON">ON</button>
                    <button class="floor-2-duct-power:OFF">OFF</button>
                </div>
                <!-- <h1>Floor 2-1</h1>  -->
                <form method="POST" action="{% url 'multipleSelect' %}" id="floor-2-1-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="floor_2_1">
                    <input type="submit" id="floor-2-1" value="Floor 2-1">
                </form> 
                <a href="{% url 'index' 'floor_2_btn_1' %}" class="floor_2_btn_1 {% if boolBtnSelectedDuct.floor_2_btn_1 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_2_btn_1 display-none-property" />
                <a href="{% url 'index' 'floor_2_btn_2' %}" class="floor_2_btn_2 {% if boolBtnSelectedDuct.floor_2_btn_2 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_2_btn_2 display-none-property" />
                <a href="{% url 'index' 'floor_2_btn_3' %}" class="floor_2_btn_3 {% if boolBtnSelectedDuct.floor_2_btn_3 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_2_btn_3 display-none-property" />
                <!-- <h1>Floor 2-2</h1>  -->
                <form method="POST" action="{% url 'multipleSelect' %}" id="floor-2-2-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="floor_2_2">
                    <input type="submit" id="floor-2-2" value="Floor 2-2">
                </form> 
                <a href="{% url 'index' 'floor_2_btn_4' %}" class="floor_2_btn_4 {% if boolBtnSelectedDuct.floor_2_btn_4 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_2_btn_4 display-none-property" />
                <a href="{% url 'index' 'floor_2_btn_5' %}" class="floor_2_btn_5 {% if boolBtnSelectedDuct.floor_2_btn_5 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_2_btn_5 display-none-property" />
                <a href="{% url 'index' 'floor_2_btn_6' %}" class="floor_2_btn_6 {% if boolBtnSelectedDuct.floor_2_btn_6 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input floor_2_btn_6 display-none-property" />
            </div>
            <div class="ceiling-1">
                <!-- <h1>Ceiling 1-1</h1>  -->
                <div class="power-btns">
                    <button class="ceiling-1-duct-power:ON">ON</button>
                    <button class="ceiling-1-duct-power:OFF">OFF</button>
                </div>
                <form method="POST" action="{% url 'multipleSelect' %}" id="ceiling-1-1-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="ceiling_1_1">
                    <input type="submit" id="ceiling-1-1" value="Ceiling 1-1">
                </form> 
                <a href="{% url 'index' 'ceiling_1_btn_1' %}" class="ceiling_1_btn_1{% if boolBtnSelectedDuct.ceiling_1_btn_1 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_1_btn_1 display-none-property" />
                <a href="{% url 'index' 'ceiling_1_btn_2' %}" class="ceiling_1_btn_2{% if boolBtnSelectedDuct.ceiling_1_btn_2 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_1_btn_2 display-none-property" />
                <a href="{% url 'index' 'ceiling_1_btn_3' %}" class="ceiling_1_btn_3{% if boolBtnSelectedDuct.ceiling_1_btn_3 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_1_btn_3 display-none-property" />
                <!-- <h1>Ceiling 1-2</h1>  -->
                <form method="POST" action="{% url 'multipleSelect' %}" id="ceiling-1-2-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="ceiling_1_2">
                    <input type="submit" id="ceiling-1-2" value="Ceiling 1-2">
                </form> 
                <a href="{% url 'index' 'ceiling_1_btn_4' %}" class="ceiling_1_btn_4{% if boolBtnSelectedDuct.ceiling_1_btn_4 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_1_btn_4 display-none-property" />
                <a href="{% url 'index' 'ceiling_1_btn_5' %}" class="ceiling_1_btn_5{% if boolBtnSelectedDuct.ceiling_1_btn_5 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_1_btn_5 display-none-property" />
                <a href="{% url 'index' 'ceiling_1_btn_6' %}" class="ceiling_1_btn_6{% if boolBtnSelectedDuct.ceiling_1_btn_6 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_1_btn_6 display-none-property" />
            </div>
            <div class="ceiling-2">
                <div class="power-btns">
                    <button class="ceiling-2-duct-power:ON">ON</button>
                    <button class="ceiling-2-duct-power:OFF">OFF</button>
                </div>
                <!-- <h1>Ceiling 2-1</h1>  -->
                <form method="POST" action="{% url 'multipleSelect' %}" id="ceiling-2-1-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="ceiling_2_1">
                    <input type="submit" id="ceiling-2-1" value="Ceiling 2-1">
                </form> 
                <a href="{% url 'index' 'ceiling_2_btn_1' %}" class="ceiling_2_btn_1{% if boolBtnSelectedDuct.ceiling_2_btn_1 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_2_btn_1 display-none-property" />
                <a href="{% url 'index' 'ceiling_2_btn_2' %}" class="ceiling_2_btn_2{% if boolBtnSelectedDuct.ceiling_2_btn_2 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_2_btn_2 display-none-property" />
                <a href="{% url 'index' 'ceiling_2_btn_3' %}" class="ceiling_2_btn_3{% if boolBtnSelectedDuct.ceiling_2_btn_3 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_2_btn_3 display-none-property" />
                <!-- <h1>Ceiling 2-1</h1> -->
                <form method="POST" action="{% url 'multipleSelect' %}" id="ceiling-2-2-form">
                    {% csrf_token %}
                    <input type="text" name="q" value="ceiling_2_2">
                    <input type="submit" id="ceiling-2-2" value="Ceiling 2-2">
                </form> 
                <a href="{% url 'index' 'ceiling_2_btn_4' %}" class="ceiling_2_btn_4{% if boolBtnSelectedDuct.ceiling_2_btn_4 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_2_btn_4 display-none-property" />
                <a href="{% url 'index' 'ceiling_2_btn_5' %}" class="ceiling_2_btn_5{% if boolBtnSelectedDuct.ceiling_2_btn_5 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_2_btn_5 display-none-property" />
                <a href="{% url 'index' 'ceiling_2_btn_6' %}" class="ceiling_2_btn_6{% if boolBtnSelectedDuct.ceiling_2_btn_6 == 1 %} selectedBtn {% endif %}"></a>
                <input type="text" name="q" class="duct-position-input ceiling_2_btn_6 display-none-property" />
            </div>
        </div>
    </section>
</section>
<section class="addModePopUp display-none-property">
    <div class="modeNameContainer">
        <label for="modeName">Mode Name </label>
        <input type="text" name="modeName" id="modeName">
    </div>
    <div class="modeDescriptionContainer">
        <label for="modeDescription">Mode Description</label>
        <textarea name="modeDescription" id="modeDescription" cols="30" rows="10"></textarea>
    </div>
    <button class="createMode">Create Mode</button>
    <button class="closeBtn">Close</button>
</section>

<section class="modes-container">
    
</section>
<section class="footer">
    <div class="fan-action">
        <a href="{% url 'supplyCommand' %}" class="supply">Exhaust</a>
        <a href="{% url 'exhaustCommand' %}" class="exhaust">Supply</a>
        <a href="{% url 'offCommand' %}" class="off">Off</a>
        <a href="{% url 'fanStatusCommand' %}" class="status">Status</a>
    </div>
    <!-- <div class="password">
        <label for="pass">PW</label>
        <input type="text" type="password">
    </div>     -->
    <div class="duct-action">
        <a href="{% url 'semiCloseCommand' %}" class="semi-close">semi-close</a>
        <!-- <a href="{% url 'semiOpenCommand' %}" class="semi-open">semi-open</a> -->
        <a class="semi-open">semi-open</a>
        <a href="{% url 'openCommand' %}" class="open">Open</a>
        <input type="text" class="open-amount">
        <a href="{% url 'closeCommand' %}" class="close">Close</a>
        <!-- <a href="{% url 'ductStatusCommand' %}" class="status">Status</a> -->
        <a class="addMode">Add Mode</a>
    </div>
</section>
</section>
<section class="semi-open-overlay display-none-property"></section>
<section class="mode-side-bar display-none-property width-0">
    <div class="title">
        <h1>Modes</h1>
    </div>
</section>

<section class="mode-select-side-bar display-none-property width-0">
    <div class="title">
        <h1>Select Mode</h1>
    </div>
    <div class="modes-container">

    </div>
</section>

<div class="openModeSelect left-99"></div>
</section>

<section class="lighting-container display-block-property">
    <div class="numbering">
        <div class="1">1</div>
        <div class="2">2</div>
        <div class="3">3</div>
        <div class="4">4</div>
        <div class="5">5</div>
    </div>
    <div class="lighting-rows">
        <div class="row1">
            <div class="light_1 {% if boolBtnSelectedLight.light_1 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_2 {% if boolBtnSelectedLight.light_2 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_3 {% if boolBtnSelectedLight.light_3 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_4 {% if boolBtnSelectedLight.light_4 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_5 {% if boolBtnSelectedLight.light_5 == 1 %} selectedLightBtn {% endif %}"></div>
        </div>
        <div class="row2">
            <div class="light_6 {% if boolBtnSelectedLight.light_6 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_7 {% if boolBtnSelectedLight.light_7 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_8 {% if boolBtnSelectedLight.light_8 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_9 {% if boolBtnSelectedLight.light_9 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_10 {% if boolBtnSelectedLight.light_10 == 1 %} selectedLightBtn {% endif %}"></div>
        </div>
        <div class="row3">
            <div class="light_11 {% if boolBtnSelectedLight.light_11 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_12 {% if boolBtnSelectedLight.light_12 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_13 {% if boolBtnSelectedLight.light_13 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_14 {% if boolBtnSelectedLight.light_14 == 1 %} selectedLightBtn {% endif %}"></div>
            <div class="light_15 {% if boolBtnSelectedLight.light_15 == 1 %} selectedLightBtn {% endif %}"></div>
        </div>
    </div>
    <div class="control-btns">
        <div class="col1">
            <div class="select-btn">SELECT</div>
            <div class="onoff">
                <div class="on-btn">ON</div>
                <div class="off-btn">OFF</div>
            </div>
        </div>
        <div class="col2">
            <div class="save-btn">SAVE AS</div>
            <div class="apply-btn">APPLY</div>
        </div>
        <div class="col3">
            <select>
                {% for mode in lightModes %}
                    <option value="{{ mode.id }}">{{ mode.mode_name }}</option>
                {% endfor %}
            </select>
            <input type="text" name="modeName" id="modeName" class="display-none-property">
        </div>
        <div class="col4">
            <div class="slider-container">
                <input type="range" name="brightness" id="brightness" min="1" max="100">
            </div>
            <div class="color-container">
                <input type="color" name="color" id="color">
            </div>
        </div>
    </div>
</section>

<section class="power-container display-none-property">
    <div class="internal-container">
        <div class="sensor-power">
            <div class="title">
                <h1>Sensor Power</h1>
            </div>
            <div class="buttons">
                <button type="button" class="sensor-board:ON">ON</button>
                <button type="button" class="sensor-board:OFF">OFF</button>
            </div>           
        </div>
        <div class="pi-power">
            <div class="title">
                <h1>Raspberry Pi Power</h1>
            </div>
            <div class="buttons">
                <button type="button" class="pi:ON">ON</button>
                <button type="button" class="pi:OFF">OFF</button>
            </div>  
        </div>
        <div class="duct-power">
            <div class="title">
                <h1>Duct Power</h1>
            </div>
            <div class="buttons">
                <div class="button-1 duct-btns">
                    <p>Duct 1</p>
                    <button type="button" class="floor-1-duct-power:ON">ON</button>
                    <button type="button" class="floor-1-duct-power:OFF">OFF</button>
                </div>
                <div class="button-2 duct-btns">
                    <p>Duct 2</p>
                    <button type="button" class="floor-2-duct-power:ON">ON</button>
                    <button type="button" class="floor-2-duct-power:OFF">OFF</button>
                </div>
                <div class="button-3 duct-btns">
                    <p>Duct 3</p>
                    <button type="button" class="ceiling-1-duct-power:ON">ON</button>
                    <button type="button" class="ceiling-1-duct-power:OFF">OFF</button>
                </div>
                <div class="button-4 duct-btns">
                    <p>Duct 4</p>
                    <button type="button" class="ceiling-2-duct-power:ON">ON</button>
                    <button type="button" class="ceiling-2-duct-power:OFF">OFF</button>
                </div>
            </div>  
        </div>
    </div>
</section>

<!-- <section class="{% if lightOverlayOpened == 0%} display-block-property {% endif %}">
    <section class="lighting-overlay display-block-property">
        <div class="container">
            <div class="left">
                <a href="{% url 'light' 'light_1' %}" id="light_1" class="light_1 {% if boolBtnSelectedLight.light_1 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_2' %}" id="light_2" class="light_2 {% if boolBtnSelectedLight.light_2 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_3' %}" id="light_3" class="light_3 {% if boolBtnSelectedLight.light_3 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_4' %}" id="light_4" class="light_4 {% if boolBtnSelectedLight.light_4 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_5' %}" id="light_5" class="light_5 {% if boolBtnSelectedLight.light_5 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_6' %}" id="light_6" class="light_6 {% if boolBtnSelectedLight.light_6 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_7' %}" id="light_7" class="light_7 {% if boolBtnSelectedLight.light_7 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_8' %}" id="light_8" class="light_8 {% if boolBtnSelectedLight.light_8 == 1 %} selectedLightBtn {% endif %}"></a>
                <a href="{% url 'light' 'light_9' %}" id="light_9" class="light_9 {% if boolBtnSelectedLight.light_9 == 1 %} selectedLightBtn {% endif %}"></a>
            </div>
            <div class="right">
                <div class="title">
                    <h1>Lighting Control</h1>
                </div>
                <div class="selected-light"></div>
                <div class="mode-select">
                    <div class="mode-select-title">
                        <h1>Select Mode</h1>
                    </div>
                    <div class="modes-container">
                        <input type="color">
                    </div>
                </div>
                <a class="on">Send</a>
                <a class="off">Close</a>
            </div>
        </div>
    </section>
</section> -->

<script>
    // document.addEventListener('DOMContentLoaded', ()=>{
    //     var floor_1_1 = document.querySelector("#floor_1_1");
    //     var floor_1_1_form = document.querySelector("#floor-1-1-form");
    //     floor_1_1.addEventListener("Click", (event)=>{
    //         event.preventDefault();
    //         floor_1_1_form.submit();
    //     });
    // });
    // document.addEventListener('DOMContentLoaded', ()=> {
        
    //     var createProduct = document.querySelector("#btn");
    //     var productForm = document.querySelector('.addModel');
    //     var hidden = true;
    //     createProduct.addEventListener("dblclick", (event) => {
    //         productForm.style.display = productForm.style.display=='none' ? 'block' : 'none';
    //     });
    // });

    // document.querySelector('.duct-action .addMode').addEventListener('click', function() {
    //     fetch('/addMode?modeName=' + modeName)
    // });

    // document.querySelector('.duct-action .addMode').addEventListener('click', function() {
    //     var addModePopUp = document.querySelector('.addModePopUp');
    //     addModePopUp.classList.remove('display-none-property');
    //     addModePopUp.classList.add('display-block-property');

    //     document.querySelector('.createMode').addEventListener('click', function() {
    //         var modeName = document.querySelector('.addModePopUp #modeName').value;
    //         var modeDescription = document.querySelector('.addModePopUp #modeDescription').value;
    //         fetch('/addMode?modeName=' + modeName + '&modeDescription=' + modeDescription)
    //         .then(response => response.json())
    //         .then(data => {
    //             console.log(data);
    //         })
    //         .catch(error => {
    //             console.log(error);
    //         });
    //         alert('Mode Created');
    //         addModePopUp.classList.remove('display-block-property');
    //         addModePopUp.classList.add('display-none-property');
    //     });
    // }); 

    document.querySelector('.openModeSelect').addEventListener('click', function() {
        document.querySelector('.openModeSelect').classList.toggle('left-99');
        document.querySelector('.openModeSelect').classList.toggle('left-80');
        document.querySelector('.mode-select-side-bar').classList.toggle('display-none-property');
        document.querySelector('.mode-select-side-bar').classList.toggle('display-block-property');
        document.querySelector('.mode-select-side-bar').classList.toggle('width-20');
        document.querySelector('.mode-select-side-bar').classList.toggle('width-0');
        document.querySelector('.main-container').classList.toggle('width-100');    
        document.querySelector('.main-container').classList.toggle('width-80');

        fetch('/getModes')
        .then(response => response.json())
        .then(data => {
            
            
            var modeContainer = document.querySelector('.mode-select-side-bar .modes-container');
            
            modeContainer.innerHTML = '';
            data.forEach(mode => {
                modeContainer.innerHTML += `
                    <div class="mode">
                        <div class="mode_info">
                            <span class='mode_id'>${mode.mode_id}</span>
                            <span>Mode Name: ${mode.mode_name}</span>
                        </div>
                        <div class="mode_delete">
                            <span class="material-symbols-outlined">
                                delete
                            </span>
                        </div>
                    </div>
                `;
            });
        })
        .catch(error => {
            console.log(error);
        });
    });

    // document.querySelectorAll('.mode-select-side-bar .modes-container .mode').forEach(element => {
    //     element.addEventListener('click', function() {
    //         console.log("clicked"); 
    //     });
    // });

    document.querySelector('.mode-select-side-bar .modes-container').addEventListener('click', function(event) {
        console.log(event.target);
        if(event.target.classList.contains('mode_info')){
            var mode_id = event.target.querySelector('.mode_id').innerHTML;
            fetch('/executeMode?modeID=' + mode_id) 
            .then(response => response.json())
            .then(data => {
                console.log(data);
            })
            .catch(error => {
                console.log(error);
            });
        }
        
    });
    
    var mode_id = null;
    var addModeEnabled = document.querySelector('.all-container').classList.contains('adding');

    document.querySelector('.duct-action .addMode').addEventListener('click', function(event) {
        event.preventDefault();
        // document.querySelector('.all-container').classList.toggle('adding');
        
        if (document.querySelector('.mode-side-bar').classList.contains('display-none-property')){
            document.querySelector('.mode-side-bar').classList.remove('display-none-property');
            document.querySelector('.mode-side-bar').classList.add('display-block-property');

            document.querySelector('.mode-side-bar').classList.toggle('width-20');
            document.querySelector('.mode-side-bar').classList.toggle('width-0');
            document.querySelector('.main-container').classList.toggle('width-100');
            document.querySelector('.main-container').classList.toggle('width-80');

            document.querySelector('.all-container').classList.toggle('adding');
            addModeEnabled = document.querySelector('.all-container').classList.contains('adding');
            fetch('/createMode')
            .then(response => response.json())
            .then(data => {
                mode_id = data.mode_id;
                console.log(mode_id);
            })
            .catch(error => {
                console.log(error);
            });
        }   
        else {
            document.querySelector('.mode-side-bar').classList.remove('display-block-property');
            document.querySelector('.mode-side-bar').classList.add('display-none-property');

            document.querySelector('.mode-side-bar').classList.toggle('width-20');
            document.querySelector('.mode-side-bar').classList.toggle('width-0');
            document.querySelector('.main-container').classList.toggle('width-100');
            document.querySelector('.main-container').classList.toggle('width-80');
            // addModeEnabled = document.querySelector('.all-container').classList.contains('adding');
        }
        
        
    });
    // var fanButtons = document.querySelectorAll('.fan-control input[type="submit"]');
    //     fanButtons.forEach(element => {
    //         element.addEventListener('click', function(event) {
    //             event.preventDefault();
            
    //             console.log(element);
    //         });
    //     });
    
    

    // document.querySelector('.mode-select-side-bar .modes-container').addEventListener('click', function(event) {
    //     var mode_id = event.target.parentElement.parentElement.querySelector('.mode_id').innerHTML;
        
    //     fetch('/deleteMode?modeID=' + mode_id)
    //     .then(response => response.json())
    //     .then(data => {
    //         fetch('/getModes')
    //         .then(response => response.json())
    //         .then(data => {              
    //             var modeContainer = document.querySelector('.mode-select-side-bar .modes-container');
                
    //             modeContainer.innerHTML = '';
    //             data.forEach(mode => {
    //                 modeContainer.innerHTML += `
    //                     <div class="mode">
    //                         <div class="mode_info">
    //                             <span class='mode_id'>${mode.mode_id}</span>
    //                             <span>Mode Name: ${mode.mode_name}</span>
    //                         </div>
    //                         <div class="mode_delete">
    //                             <span class="material-symbols-outlined">
    //                                 delete
    //                             </span>
    //                         </div>
    //                     </div>
    //                 `;
    //             });
    //         })
    //         .catch(error => {
    //             console.log(error);
    //         });
    //     })
    //     .catch(error => {
    //         console.log(error);
    //     });

        
    // });

    var fanButton = null;
    var fanControl = null;
    var fanButtons = document.querySelectorAll('.fan-control input[type="submit"]');
    fanButtons.forEach(element => {
        element.addEventListener('click', function(event) {
            if (addModeEnabled) {
                event.preventDefault();   
                fanButton = element.parentElement.querySelector('input[type="text"]').value;
            }
            else {
                console.log('submit');
            }
        });
    });

    var fanControlBtns = document.querySelectorAll('.footer .fan-action a');
    fanControlBtns.forEach(element => {
        element.addEventListener('click', function(event) {
            if (addModeEnabled) {
                event.preventDefault();
                fanControl = element.classList[0];
                if (fanButton && fanControl) {
                    fetch('/addMode?mode=fan&modeID=' + mode_id + '&fanButton=' + fanButton + '&fanControl=' + fanControl) 
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
                    .catch(error => {
                        console.log(error);
                    });
                    document.querySelector('.mode-side-bar').innerHTML += `
                        <div class="mode">
                            <span>Mode ID: ${mode_id}</span>
                            <span>${fanButton}</span>
                            <span>${fanControl}</span>
                        </div>                
                    `;
                    fanButton = null;
                    fanControl = null;
                }
                else {
                    console.log('submit');
                }

                
                fanButton = null;
                fanControl = null;
            }
            else {
                console.log('submit');
            }
        });
    });

    var ductButton = null;
    var ductControl = null;
    var ductButtons = document.querySelectorAll('.duct-control .duct-action a');
    ductButtons.forEach(element => {
        element.addEventListener('click', function(event) {
            if (addModeEnabled) {
                event.preventDefault();
                ductButton = element.classList[0];
            }
            else {
                console.log('submit');
            }
        }); 
    });   

    var ductControlBtns = document.querySelectorAll('.footer .duct-action a');
    ductControlBtns.forEach(element => {
        element.addEventListener('click', function(event) {
            if (addModeEnabled) {
                event.preventDefault();
                ductControl = element.classList[0];
                if (ductButton && ductControl) {
                    fetch('/addMode?mode=duct&modeID=' + mode_id + '&ductButton=' + ductButton + '&ductControl=' + ductControl) 
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
                    .catch(error => {
                        console.log(error);
                    });

                    document.querySelector('.mode-side-bar').innerHTML += `
                        <div class="mode">
                            <span>${mode_id}</span>
                            <span>${ductButton}</span>
                            <span>${ductControl}</span>
                        </div>                
                    `;

                    ductButton = null;
                    ductControl = null;
                }
                else {
                    console.log('submit');
                }
                ductButton = null;
                ductControl = null;
            }
            else {
                console.log('submit');
            }
        });
    });

    let lightingOverlay = document.querySelector('.lighting-overlay');
    document.querySelector('.header .lighting').addEventListener('click', function() {
        // lightingOverlay.classList.toggle('display-none-property');
        // lightingOverlay.classList.toggle('display-block-property');
    });

    // let lights = document.querySelectorAll('.lighting-overlay .container .left div');
    // lights.forEach(element => {
    //     element.addEventListener('click', function() {
    //         element.classList.toggle('selectedLightBtn');
    //     });
    // });

    
    // let lightSend = document.querySelector('.lighting-overlay .container .right .on');
    // let colorSelector = document.querySelector('.lighting-overlay .container .right input[type="color"]');

    // lightSend.addEventListener('click', function() {
    //     console.log(colorSelector);
    //     console.log(colorSelector.value);
    //     let colorValue = colorSelector.value;   
        
    //     let r = parseInt(colorValue.substr(1, 2), 16);
    //     let g = parseInt(colorValue.substr(3, 2), 16);
    //     let b = parseInt(colorValue.substr(5, 2), 16);

    //     r /= 255;
    //     g /= 255; 
    //     b /= 255;
        
    //     if (r > 0.04045) {
    //         r = Math.pow((r + 0.055) / (1.0 + 0.055), 2.4);
    //     }
    //     else {
    //         r = r / 12.92;
    //     }

    //     if (g > 0.04045) {
    //         g = Math.pow((g + 0.055) / (1.0 + 0.055), 2.4);
    //     }
    //     else {
    //         g = g / 12.92;
    //     }

    //     if (b > 0.04045) {
    //         b = Math.pow((b + 0.055) / (1.0 + 0.055), 2.4);
    //     }
    //     else {
    //         b = b / 12.92;
    //     }

    //     var X = r * 0.664511 + g * 0.154324 + b * 0.162028;
    //     var Y = r * 0.283881 + g * 0.668433 + b * 0.047685;
    //     var Z = r * 0.000088 + g * 0.072310 + b * 0.986039;
    //     var x = X / (X + Y + Z);
    //     var y = Y / (X + Y + Z);

    //     // fetch('/executeLightCommand?color=' + encodeURIComponent(colorValue));
    //     fetch('/executeLightCommand?x=' + x + '&y=' + y + '&on=true');
    // });

    // let lightOff = document.querySelector('.lighting-overlay .container .right .off');
    // lightOff.addEventListener('click', function() {
    //     fetch('/executeLightCommand?x=0&y=0&on=false');
    // });


    
    // let lightBtns = document.querySelectorAll('.lighting-overlay .container .left a');
    // lightBtns.forEach(element => {
    //     element.addEventListener('click', function(event) {
    //         event.preventDefault(); 
    //         fetch('/light/' + element.id + '/');
            
    //     });
    // });

    // document.querySelector('.header .lighting').addEventListener('click', function() {
    //     fetch('/lightOverlayUpdate');
    // });
    
    let ventilationBtn = document.querySelector('.nav .ventilation-btn');
    let lightingBtn = document.querySelector('.nav .lighting-btn');
    let powerBtn = document.querySelector('.nav .power-btn');
    let allContainer = document.querySelector('.all-container');
    let lightingContainer = document.querySelector('.lighting-container');
    let powerContainer = document.querySelector('.power-container');


    lightingBtn.addEventListener('click', function() {
        allContainer.classList.add('display-none-property');
        powerContainer.classList.add('display-none-property');
        allContainer.classList.remove('display-block-property');
        powerContainer.classList.remove('display-block-property');
        lightingContainer.classList.add('display-block-property');
        lightingContainer.classList.remove('display-none-property');
    });
    
    ventilationBtn.addEventListener('click', function() {
        allContainer.classList.remove('display-none-property');
        allContainer.classList.add('display-block-property');
        powerContainer.classList.add('display-none-property');  
        powerContainer.classList.remove('display-block-property');
        lightingContainer.classList.remove('display-block-property');
        lightingContainer.classList.add('display-none-property');
    });

    powerBtn.addEventListener('click', function() {
        allContainer.classList.add('display-none-property');
        allContainer.classList.remove('display-block-property');
        lightingContainer.classList.add('display-none-property');
        lightingContainer.classList.remove('display-block-property');
        powerContainer.classList.remove('display-none-property');
        powerContainer.classList.add('display-block-property');
    });

    let lightBtns = document.querySelectorAll('.lighting-container .lighting-rows > div > div');
    lightBtns.forEach(element => {
        element.addEventListener('click', function() {
            element.classList.toggle('selectedLightBtn');
            fetch('/light/' + element.classList[0] + '/');
        });
    });

    let lightOnBtn = document.querySelector('.lighting-container .control-btns .onoff .on-btn');
    let lightOffBtn = document.querySelector('.lighting-container .control-btns .onoff .off-btn');
    let colorSelector = document.querySelector('.lighting-container .control-btns .col4 .color-container input[type="color"]');
    let brightnessSlider = document.querySelector('.lighting-container .control-btns .col4 .slider-container input[type="range"]');

    lightOnBtn.addEventListener('click', function() {
            let colorValue = colorSelector.value;   
            let brightnessValue = brightnessSlider.value;

            let r = parseInt(colorValue.substr(1, 2), 16);
            let g = parseInt(colorValue.substr(3, 2), 16);
            let b = parseInt(colorValue.substr(5, 2), 16);

            r /= 255;
            g /= 255; 
            b /= 255;
            
            if (r > 0.04045) {
                r = Math.pow((r + 0.055) / (1.0 + 0.055), 2.4);
            }
            else {
                r = r / 12.92;
            }

            if (g > 0.04045) {
                g = Math.pow((g + 0.055) / (1.0 + 0.055), 2.4);
            }
            else {
                g = g / 12.92;
            }

            if (b > 0.04045) {
                b = Math.pow((b + 0.055) / (1.0 + 0.055), 2.4);
            }
            else {
                b = b / 12.92;
            }

            var X = r * 0.664511 + g * 0.154324 + b * 0.162028;
            var Y = r * 0.283881 + g * 0.668433 + b * 0.047685;
            var Z = r * 0.000088 + g * 0.072310 + b * 0.986039;
            var x = X / (X + Y + Z);
            var y = Y / (X + Y + Z);

            // fetch('/executeLightCommand?color=' + encodeURIComponent(colorValue));
            fetch('/executeLightCommand?x=' + x + '&y=' + y + '&on=true' + '&brightness=' + brightnessValue);
    });

    lightOffBtn.addEventListener('click', function() {  
        fetch('/executeLightCommand?x=0&y=0&on=false&brightness=0');
    });

    let saveBtn = document.querySelector('.lighting-container .control-btns .col2 .save-btn');
    let applyBtn = document.querySelector('.lighting-container .control-btns .col2 .apply-btn');
    let modeNameInput = document.querySelector('.lighting-container .control-btns .col3 input[type="text"]');
    saveBtn.addEventListener('click', function() {
        modeNameInput.classList.remove('display-none-property');
    });

    applyBtn.addEventListener('click', function() {
        let modeName = modeNameInput.value;
        fetch('/saveLights?modeName=' + modeName + '&color=' + encodeURIComponent(colorSelector.value) + '&brightness=' + encodeURIComponent(brightnessSlider.value));
        modeNameInput.classList.add('display-none-property');
    });

    let forms = document.querySelectorAll('.fan-control form');
    forms.forEach(form => {
        let idInput = form.querySelector('input[type="text"]');
        let submitInput = form.querySelector('input[type="submit"]');
        
        submitInput.addEventListener('click', function(e) {
            e.preventDefault();
            submitInput.classList.toggle('selectedBtn');
            fetch('/fanBtnUpdate?fanID=' + idInput.value);
        });
    });

    let ductBtns = document.querySelectorAll('.duct-control a');
    ductBtns.forEach(element => {
        element.addEventListener('click', function(e) {
            e.preventDefault();
            element.classList.toggle('selectedBtn');
            fetch('/index/' + element.classList[0]);
        });
    });

    let fanSupply = document.querySelector('.footer .fan-action .supply');
    let fanExhaust = document.querySelector('.footer .fan-action .exhaust');
    let fanOff = document.querySelector('.footer .fan-action .off');
    let fanStatus = document.querySelector('.footer .fan-action .status');
    fanSupply.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/supplyCommand');
    });
    fanExhaust.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/exhaustCommand');
    });
    fanOff.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/offCommand');
    });
    fanStatus.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/fanStatusCommand');
    });

    let ductSemiClose = document.querySelector('.footer .duct-action .semi-close'); 
    let ductSemiOpen = document.querySelector('.footer .duct-action .semi-open');
    let ductOpen = document.querySelector('.footer .duct-action .open');
    let ductClose = document.querySelector('.footer .duct-action .close');
    ductSemiClose.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/semiCloseCommand');
    });
    ductSemiOpen.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/semiOpenCommand');
    });
    ductOpen.addEventListener('click', function(e) {
        e.preventDefault();
        let openAmount = document.querySelector('.footer .duct-action .open-amount').value;
        fetch('/openCommand?openAmount=' + openAmount);
    });
    ductClose.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/closeCommand');
    });

    
    let sensorBtns = document.querySelectorAll('.sensor-power button');
    sensorBtns.forEach(element => {
        element.addEventListener('click', function() {
            fetch('/powerSensor?data=' + element.classList[0]);
        });
    });

    let piBtns = document.querySelectorAll('.pi-power button');
    piBtns.forEach(element => {
        element.addEventListener('click', function() {
            fetch('/powerPi?data=' + element.classList[0]);
        });
    });



    let powerPageDuctBtns = document.querySelectorAll('.duct-btns button');
    powerPageDuctBtns.forEach(element => {
        element.addEventListener('click', function() {
            fetch('/powerDuct?data=' + element.classList[0]);
        })
    });


    let powerBtns = document.querySelectorAll('.duct-control .duct-action .power-btns button');
    powerBtns.forEach(element => {
        element.addEventListener('click', function() {
            fetch('/powerDuct?data=' + element.classList[0]);
        })
    });


    let semiOpenBtn = document.querySelector('.footer .duct-action .semi-open');
    let ductButtonForPosition = document.querySelectorAll('.duct-control .duct-action a');
    let ductPositionInputs = document.querySelectorAll('.duct-position-input');

    semiOpenBtn.addEventListener('click', function(e) {
        e.preventDefault();
        ductPositionInputs.forEach(element => {
            element.classList.toggle('display-none-property');
        });
        ductButtonForPosition.forEach(element => {
            element.classList.toggle('display-none-property');
        });
    });

    ductPositionInputs.forEach(element => {
        element.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                fetch('/semiOpenCommand?position=' + element.value + '&duct=' + element.classList[1]);
            }
        });
    });
    
</script>

{% endblock %}